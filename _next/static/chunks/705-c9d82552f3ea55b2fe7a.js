(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{13082:function(e,n,t){"use strict";t.d(n,{F:function(){return E}});var r=t(85893),s=t(67294),o=t(809),a=t.n(o),c=t(92447),i=t(55688),l=(0,s.createContext)({}),u=function(e){var n=e.slug,t=e.children,o=(0,i.E)().api,u=(0,s.useState)({status:"initial",comments:void 0}),d=u[0],m=u[1],h=function(){var e=(0,c.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Refreshing comments"),m({status:"fetching",comments:d.comments}),e.prev=2,e.next=5,o.getComments(n);case 5:t=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error("Failure to retrieve comments",e.t0),m({status:"failure",comments:d.comments}),e.abrupt("return");case 13:console.log("Got comments",t),m({status:"success",comments:t});case 15:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,c.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("fetching"!=d.status){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,h();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){h()}),[n]),(0,r.jsx)(l.Provider,{value:{state:d,slug:n,refreshComments:f},children:t})},d=function(){return(0,s.useContext)(l)},m=t(32292),h=t(15538),f=t(82669),p=t(67954),x=t(51252),j=t(609),v=t(16792),b=t(10267),g=t(97975),y=t(4280),w={maxAge:2592e3,path:"/",sameSite:"strict"},Z=function(e){var n=e.replyTo,t=e.onSubmitted,o=void 0===t?function(){}:t,l=(0,y.Dz)(["comment-email","comment-name","comment-website"],w),u=(0,m.Z)(l,3),Z=(0,m.Z)(u[0],2),O=Z[0],k=Z[1],_=(0,m.Z)(u[1],2),S=_[0],C=_[1],D=(0,m.Z)(u[2],2),N=D[0],P=D[1],E=d(),R=E.slug,z=E.refreshComments,F=(0,s.useState)(null),M=F[0],W=F[1],G=(0,s.useState)(null),L=G[0],T=G[1],A=(0,s.useState)(null),U=A[0],q=A[1],H=(0,s.useState)(null),B=H[0],I=H[1],K=(0,i.E)().api,Y=(0,s.useState)(!1),J=Y[0],Q=Y[1],V=(0,s.useState)(""),$=V[0],X=V[1],ee=function(){var e=!0;/\S+@\S+\.\S+/.test(S)?T(null):(T("Enter a valid email address."),e=!1),10<=$.length&&$.length<=1e3?W(null):(W("Body length must be between 10 and 1000 characters."),e=!1);try{N.length>0&&new URL(N),q(null)}catch(n){q("Enter a valid URL."),e=!1}return e},ne=function(e){var n,t,r;if(e){var s=e.data;403==e.status&&I("You are unauthorized to post: ".concat(s.detail)),null===s||void 0===s||null===(n=s.author_email)||void 0===n||n.forEach(T),null===s||void 0===s||null===(t=s.author_website)||void 0===t||t.forEach(q),null===s||void 0===s||null===(r=s.content_md)||void 0===r||r.forEach(W)}else I("A network error occured! Please try again later.")},te=function(){var e=(0,c.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee()){e.next=2;break}return e.abrupt("return");case 2:return Q(!0),e.prev=3,e.next=6,K.createComment({author_name:O.length>0?O:null,author_email:S,author_website:N.length>0?N:null,content_md:$,reply_parent:n,slug:R});case 6:t=e.sent,console.log("Created comment",t),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(3),ne(e.t0),Q(!1),e.abrupt("return");case 15:return X(""),Q(!1),o(),e.next=20,z();case 20:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();return(0,r.jsx)("div",{children:(0,r.jsxs)(h.Z,{children:[(0,r.jsxs)(f.Z,{row:!0,children:[(0,r.jsx)(p.Z,{sm:"4",for:"comment-name",children:"Name (leave blank for anonymous)"}),(0,r.jsx)(x.Z,{sm:"8",children:(0,r.jsx)(j.Z,{disabled:J,onChange:(0,y.W6)(k),type:"text",value:O,name:"name",id:"comment-name",placeholder:"Willy Shakespeare"})})]}),(0,r.jsxs)(f.Z,{row:!0,children:[(0,r.jsx)(p.Z,{sm:"4",for:"comment-email",children:"Email (required)"}),(0,r.jsxs)(x.Z,{sm:"8",children:[(0,r.jsx)(j.Z,{disabled:J,onChange:(0,y.W6)(C),type:"email",value:S,name:"email",id:"comment-email",placeholder:"user@example.com"}),L?(0,r.jsx)(v.Z,{color:"danger",children:L}):null]})]}),(0,r.jsxs)(f.Z,{row:!0,children:[(0,r.jsx)(p.Z,{sm:"4",for:"comment-website",children:"Website"}),(0,r.jsxs)(x.Z,{sm:"8",children:[(0,r.jsx)(j.Z,{disabled:J,onChange:(0,y.W6)(P),type:"url",value:N,name:"website",id:"comment-website",placeholder:"my.cool.site"}),U?(0,r.jsx)(v.Z,{color:"danger",children:U}):null]})]}),(0,r.jsxs)(f.Z,{children:[(0,r.jsxs)(p.Z,{for:"comment-body",children:["Comment (",1e3-$.length," chars left)"]}),(0,r.jsx)(j.Z,{disabled:J,onChange:function(e){return X(e.target.value)},type:"textarea",name:"body",value:$,id:"comment-body",placeholder:"Type your comment here..."}),(0,r.jsx)(v.Z,{children:"Markdown formatting is supported."}),M?(0,r.jsx)(v.Z,{color:"danger",children:M}):null,B?(0,r.jsx)(v.Z,{color:"danger",children:B}):null]}),(0,r.jsx)(b.Z,{children:(0,r.jsx)(g.Z,{disabled:J,color:"primary",onClick:te,children:"Submit!"})})]})})},O=t(22605),k=t(11163),_=t(89583),S=function(e){var n=e.comment,t=e.onSubmitted,o=void 0===t?function(){}:t,l=(0,s.useState)(""),u=l[0],d=l[1],m=(0,i.E)().api,p=(0,s.useState)(!1),x=p[0],b=p[1],y=(0,s.useState)(null),w=y[0],Z=y[1],O=function(e){var n,t;e?null===(n=e.data)||void 0===n||null===(t=n.content_md)||void 0===t||t.forEach(Z):Z("A network error occured! Please try again later.")},k=function(){var e=(0,c.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,m.reportComment(n,u);case 4:d(""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O(e.t0.response);case 10:b(!1),o();case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)(h.Z,{children:[(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(j.Z,{maxLength:140,disabled:x,onChange:function(e){return d(e.target.value)},type:"textarea",name:"body",value:u,id:"report-body",placeholder:"Why should this post be removed?"}),(0,r.jsx)(v.Z,{children:"Markdown formatting is supported."}),w?(0,r.jsx)(v.Z,{color:"danger",children:w}):null]}),(0,r.jsx)(g.Z,{disabled:x,color:"primary",onClick:k,children:"Submit!"})]})},C=function(e){var n,t=e.author,s=(0,r.jsx)("strong",{children:null!==(n=t.name)&&void 0!==n?n:"[anonymous]"});return(0,r.jsxs)(r.Fragment,{children:[t.website?(0,r.jsx)("a",{href:t.website,children:s}):s,t.email?" <".concat(t.email,">"):null]})},D=function(e){var n=e.comment,t=e.isReply,o=void 0!==t&&t,i=d().refreshComments,l=(0,O.Z)(n.timeAuthored,"d MMM yyyy"),u=((0,k.useRouter)(),"comment-".concat(n.id)),m=new URL(window.location.href);m.hash=u;var h,f=(0,s.useState)(null),p=f[0],x=f[1],j=function(e){return function(){x(p==e?null:e)}},v=function(){var e=(0,c.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(null),e.next=3,i();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();switch(p){case null:h=null;break;case"reply":h=(0,r.jsx)(Z,{replyTo:n.id,onSubmitted:v});break;case"report":h=(0,r.jsx)(S,{comment:n.id,onSubmitted:v})}return(0,r.jsxs)("div",{children:[(0,r.jsx)("hr",{}),(0,r.jsxs)("article",{className:"comment",id:u,children:[(0,r.jsxs)("div",{className:"d-flex",children:[(0,r.jsxs)("div",{className:"header mr-auto",children:[(0,r.jsx)(C,{author:n.author})," ",(0,r.jsxs)("span",{className:"text-muted",children:[o?"replied ":null,"on ",l]})]}),(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)(g.Z,{outline:"reply"!=p,onClick:j("reply"),color:"primary",size:"sm",style:{fontSize:12},children:[(0,r.jsx)(_.Bjt,{title:"reply"})," Reply"]})," ",(0,r.jsxs)(g.Z,{outline:"report"!=p,onClick:j("report"),color:"danger",size:"sm",style:{fontSize:12},children:[(0,r.jsx)(_.wQ2,{title:"flag"})," Report"]})," ",(0,r.jsxs)(g.Z,{href:m.href,outline:!0,color:"info",size:"sm",style:{fontSize:12},children:[(0,r.jsx)(_.gjK,{title:"link"})," Permalink"]})]})]}),(0,r.jsx)("div",{className:"body",dangerouslySetInnerHTML:{__html:n.htmlContent}}),(0,r.jsxs)("div",{className:"children",children:[h,(0,r.jsx)(N,{comments:n.children,isReply:!0})]})]})]})},N=function(e){var n=e.comments,t=e.isReply,s=void 0!==t&&t;return(0,r.jsx)(r.Fragment,{children:n.map((function(e,n){return(0,r.jsx)(D,{comment:e,isReply:s},e.id)}))})},P=function(){var e=d().state;switch(e.status){case"initial":return null;case"success":var n=e.comments;return n.length>0?(0,r.jsx)(N,{comments:n}):(0,r.jsx)("p",{children:"No comments. Start the conversation!"});case"fetching":var t=e.comments;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Fetching comments..."}),t?(0,r.jsx)(N,{comments:t}):null]});case"failure":var s=e.comments;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Failed to fetch comments."}),s?(0,r.jsx)(N,{comments:s}):null]})}},E=function(e){var n=e.slug;return(0,r.jsx)("div",{className:"comments",children:(0,r.jsxs)(u,{slug:n,children:[(0,r.jsx)(Z,{}),(0,r.jsx)(P,{})]})})}},47008:function(e,n,t){"use strict";t.d(n,{i:function(){return p}});var r=t(85893),s=t(67294),o=t(13322),a=t.n(o),c=t(27431),i=t.n(c),l=t(18835),u=t.n(l),d=t(26265);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=u()().use(a(),{fragment:!0}).use(i(),{createElement:s.createElement,allowDangerousHtml:!0,components:{img:function(e){return(0,r.jsx)("a",{href:e.src,children:(0,r.jsx)("img",h(h({},e),{},{width:1200}))})}}}),p=function(e){var n=e.children;return(0,r.jsx)("article",{className:"longform",children:f.processSync(n).result})}},74758:function(e,n,t){"use strict";t.d(n,{eI:function(){return m},Hz:function(){return h},q$:function(){return f},mz:function(){return p},Yj:function(){return x}});var r=t(85893),s=t(46674),o=(t(67294),t(98595)),a=t(10267),c=t(51252),i=t(30354),l=t(60099),u=t.n(l),d=t(76550),m=function(e){var n=e.title,t=e.description,i=e.descriptionRaw,l=e.headingColor,m=e.above,h=e.sidebar,f=e.thumbnail,p=e.children,x=e.url;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{canonicalUrl:x,title:n,description:i,image:f}),(0,r.jsx)(d.C,{above:m,title:n,description:t,bgColor:l}),(0,r.jsx)(o.Z,{className:u().container,children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(c.Z,{lg:8,className:u().content,children:p}),(0,r.jsx)(c.Z,{lg:4,className:u().sidebar,children:h})]})})]})},h=function(e){var n=e.children;return(0,r.jsx)("div",{className:u().sidebarGroup,children:n})},f=function(e){var n=e.name,t=e.icon,s=e.children,o=e.show;return void 0===o||o?(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{style:{minWidth:180},children:[t?(0,r.jsxs)(r.Fragment,{children:[t," "]}):null,n]}),(0,r.jsx)("td",{className:u().statusData,children:s})]}):null},p=function(e){var n=e.children;return(0,r.jsx)(h,{children:(0,r.jsx)("table",{style:{width:"100%"},children:(0,r.jsx)("tbody",{children:n})})})},x=function(e){var n=e.tags;return(0,r.jsxs)(h,{children:[(0,r.jsx)("h2",{children:"Tags"}),(0,r.jsx)(i.P,{tags:n,link:!0})]})}},76550:function(e,n,t){"use strict";t.d(n,{C:function(){return a}});var r=t(85893),s=(t(67294),t(32860)),o=t.n(s),a=function(e){var n=e.title,t=e.description,s=e.bgColor,a=e.textColor,c=e.above;return(0,r.jsxs)("div",{style:{backgroundColor:s},children:[(0,r.jsx)("nav",{className:o().above,children:c}),(0,r.jsxs)("header",{className:o().header,children:[(0,r.jsx)("h1",{style:{color:a},children:n}),t?(0,r.jsx)("p",{style:{color:a},children:t}):null]})]})}},8490:function(e,n,t){"use strict";t.d(n,{FM:function(){return a},q3:function(){return c}});var r=t(26265);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e){return o(o({},e),{},{startDate:new Date(e.startDate),endDate:e.endDate?new Date(e.endDate):null})}function c(e){return o(o({},e),{},{date:new Date(e.date)})}},60099:function(e){e.exports={container:"longform-layout_container__1bKFt",sidebarGroup:"longform-layout_sidebarGroup__1maJR",content:"longform-layout_content__gfokN",statusData:"longform-layout_statusData__1GlEa"}},32860:function(e){e.exports={header:"page-heading_header__zwjn1",above:"page-heading_above__2RV0m"}}}]);